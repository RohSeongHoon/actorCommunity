<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <link href="../css/styles.css" rel="stylesheet" />
    <meta
      name="discriptison"
      content="연기,뮤지컬,보컬,악기 예술인들의 커뮤니티 코멘트를 받을 수 있습니다 "
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="keywords" content="연기,뮤지컬,보컬,악기,기타" />
    <title>test</title>
    <meta name="description" content="예체능인들의 커뮤니티입니다" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  </head>
  <body>
    <nav id="navbar-container">
      <div id="logo">
        <h1><a class="logo__a" href="../index.html">배우 커뮤니티</a></h1>
      </div>
      <form id="search">
        <input type="text" placeholder="검색어를 입력하세요" />
        <button type="submit"><span>검색</span></button>
      </form>
      <div id="login-button">
        <a href="../login-interface.html" rel="login"><span>로그인</span></a>
      </div>
    </nav>
    <nav class="category-bar">
    </nav>

    <main>
      <h2 class="category-head">자유게시판</h2>
      <table id="community-table">
        <thead>
          <tr id="community-table-head">
            <td id="head-title" class="head-item">제목</td>
            <td id="head-writer" class="head-item">작성자</td>
            <td id="head-views" class="head-item">조회수</td>
          </tr>
        </thead>
        <tbody id="table-body"></tbody>
      </table>
      <button type="submit" class="write-button">
        <a href="./">글쓰기</a>
      </button>
    </main>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>
      $(document).ready(function () {
        $.get("http://localhost:3000/categories", function (data) {
          $(".category-bar").append(
            '<ul id="category-bar__container" class="category-bar__container"></ul>'
          );
          for (var i = 0; i < data.length; i++) {
            let category = data[i];
            $("#category-bar__container").append(
              '<li class="category-bar__list">' +
                "<a" +
                ' class="category-bar__list--title"' +
                'href="../test/community/actor.html"' +
                'rel="actor">' +
                category.categoryKr +
                "</a>" +
                '<ul id="categort-bar__content' +
                i +
                '" class="categort-bar__content"></ul>'
            );

            for (let j = 0; j < category.contents.length; j++) {
              let contents = category.contents[j];
              console.log(contents.postLink);
              console.log(contents.postNameKr);

              $("#categort-bar__content" + i).append(
                '<li class="category-bar__content--item">' +
                  "<a href=" +
                  contents.postLink +
                  ">" +
                  contents.postNameKr +
                  "</a>" +
                  "</li>"
              );
            }
          }
        });
  
      //html 재활용 하고 싶은데 이렇게 api주소만 변경해서 사용해도 되는건지 
        $.get(
          "http://localhost:3000/media/freePost",
          function (data) {
            data.forEach((element) => {
              $("#table-body").append(
                '<tr class="community-table-body">' +
                  '<td class="body-item community-post-title">' +
                  '<a class="a-scope" href="' +
                  element.link +
                  '">' +
                  element.title +
                  '<span class="number-color">' +
                  element.numberOfComment +
                  "</span>" +
                  "</a>" +
                  "</td>" +
                  '<td class="body-item community-post-writer">' +
                  '<a class="a-scope" href="#">' +
                  element.writer +
                  "</a>" +
                  "</td>" +
                  '<td class="body-item community-post-views number-color">' +
                  element.views +
                  "</td>" +
                  "</tr>"
              );
            });
          }
        );
      
        
        
      });
    </script>
  </body>
</html>